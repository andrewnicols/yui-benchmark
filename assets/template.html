<!DOCTYPE html>
<html>
	<head>
		<script src="/benchmark.js"></script>
		<script>

		var seedCount = {{seedCount}};
	    var instanceCount = 0;
	    var suite = new Benchmark.Suite();
	    
		function registerInstance(YUI, modulePath) {
			console.log(YUI.seedBase + ': registerInstance');
			var Y = YUI({
				base: YUI.seedBase + "/build/",
				filter: 'raw',
	    		modules: {'app-benchmark-test' : { fullpath : modulePath }}
	    	});

			Y.Benchmark = {
				suite: suite,
				sha: YUI.sha,
				ref: YUI.ref
			}

			Y.use('app-benchmark-test', function (Y) {
				console.log(Y.Benchmark.sha + ': use');
				instanceCount++;

				if (instanceCount === seedCount) {
					ready();
				}
			});
		}

		function ready() {
			console.log('ready');
			console.log(suite);
			suite.on('cycle', function(event) {
				console.log('cycle');
			})
			suite.on('complete', function() {
				console.log(this);
				console.log('Fastest is ' + this.filter('fastest').pluck('name'));
			});

			suite.on('error', function () {
				console.log(arguments);
			})
			suite.on('abort', function () {
				console.log('onAbort');
			})
			suite.on('reset', function () {
				console.log('onReset');
			})
			suite.run();
		}

		</script>
		{{head}}
	</head>

	<body class="yui3-skin-sam"></body>
</html>